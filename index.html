<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>xut | Apuntes de Ciberseguridad en Castellano</title>
  <meta name="description" content="Apuntes t√©cnicos de ciberseguridad y TryHackMe en castellano.">
  <meta name="keywords" content="ciberseguridad, tryhackme, apuntes, hacking, linux, xut">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="icon" type="image/png" href="https://avatars.githubusercontent.com/u/172497238?v=4">
</head>

<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="site-header-inner">
      <div class="site-left">
        <a class="site-brand" href="/index.html" aria-label="xut - inicio">
          <span aria-hidden="true">‚ú±</span>
          <span>xut</span>
        </a>
        <a id="toggle-index" class="site-link" href="#">√çndice</a>
      </div>

      <nav class="site-nav" aria-label="Principal">
        <ul>
          <li><a href="/index.html" aria-current="page">Inicio</a></li>
          <li><a href="/sobre-mi.html">Sobre m√≠</a></li>
	  <li><a href="/graph.html">Vista gr√°fica</a></li>
          <li><a href="https://github.com/xut-e" rel="noopener" target="_blank">GitHub</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- BUSCADOR -->
  <div class="search-container">
    <form class="site-search" role="search" action="/search.html" method="get">
      <input
        class="site-search-input"
        type="search"
        name="q"
        placeholder="Buscar‚Ä¶"
        aria-label="Buscar en los apuntes"
      />
      <button class="site-search-button" type="submit" aria-label="Buscar">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="7" cy="7" r="5" />
          <line x1="11" y1="11" x2="15" y2="15" />
        </svg>
      </button>
    </form>
  </div>

  <!-- LAYOUT PRINCIPAL -->
  <main class="page-shell with-sidebar">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="indice">
      <h2 id="indice-label">√çndice</h2>
      <div id="dynamic-index">
        <p>Cargando √≠ndice...</p>
      </div>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <section class="content">
      <header class="main-content-header">
        <h2>Apuntes de Ciberseguridad</h2>
        <p class="intro">
          Notas, cursos y recursos personales sobre seguridad inform√°tica, THM y m√°s.
        </p>
      </header>

       <!-- √öltimos apuntes (din√°mico) -->
	<section class="card latest-posts-card">
	  <h3>üìò √öltimos apuntes</h3>
	  <ul id="latest-posts">
	    <li>Cargando √∫ltimos apuntes...</li>
	  </ul>
	</section>
     

      <!-- Sobre m√≠ -->
      <section class="card about-summary">
	  <div class="about-summary-content">
	    <img
	      class="about-summary-avatar"
	      src="https://avatars.githubusercontent.com/u/172497238?v=4"
	      alt="Avatar de xut-e"
	      width="72"
	      height="72"
	    />
	    <div class="about-summary-text">
	      <h3>üß† Sobre m√≠</h3>
	      <p>
		Soy <strong>xut-e</strong>, estudiante de ciberseguridad. Comparto mis apuntes,
		pr√°cticas y recursos sobre hacking √©tico, redes y plataformas como TryHackMe.
	      </p>
	      <p><a href="/sobre-mi.html" class="about-summary-link">M√°s sobre m√≠ ‚Üí</a></p>
	    </div>
	  </div>
	</section>

  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="site-footer-inner">
      <small>¬© <span id="year"></span> xut-e ‚Äî Todos los derechos reservados</small>
      <pre class="ascii" aria-hidden="true">
             ..                      .....          
   .H88x.  :~)88:                 .H8888888h.  ~-.  
  x888888X ~:8888    x.    .      888888888888x  `> 
 ~   "8888X  %88"  .@88k  z88u   X~     `?888888hx~ 
      X8888       ~"8888 ^8888   '      x8.^"*88*"  
   .xxX8888xxxd>    8888  888R    `-:- X8888x       
  :88888888888"     8888  888R         488888>      
  ~   '8888         8888  888R       .. `"88*       
 xx.  X8888:    .   8888 ,888B .   x88888nX"      . 
X888  X88888x.x"   "8888Y 8888"   !"*8888888n..  :  
X88% : '%8888"      `Y"   'YP    '    "*88888888*   
 "*=~    `""                             ^"***"`    
      </pre>
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script src="assets/js/generate-index.js"></script>
  <script src="assets/js/latest-posts.js"></script>
  <script>
    // ======== Mostrar / Ocultar √≠ndice (en home siempre oculto al inicio) ========
    window.addEventListener("load", () => {
      const btn = document.getElementById("toggle-index");
      const aside = document.getElementById("indice");
      const pageShell = document.querySelector(".page-shell");
      if (!btn || !aside || !pageShell) return;

      // üîí Siempre empieza oculto (ignorar localStorage)
      localStorage.setItem("indexVisible", "false");
      aside.classList.add("hidden");
      pageShell.classList.add("full-width");
      btn.textContent = "Mostrar √≠ndice";
      btn.classList.remove("active");

      // === helper: cerrar todo y abrir solo la primera ra√≠z ("THM") ===
      function collapseAllAndOpenOnlyFirstRoot() {
        const treeNav = aside.querySelector(".tree-nav");
        if (!treeNav) return false;

        const allDetails = treeNav.querySelectorAll("details");
        allDetails.forEach(d => d.open = false);

        console.log("üü¢ √çndice reiniciado: todo colapsado (THM cerrado)");
        return true;
      }

      // Espera a que generate-index.js haya generado el √°rbol antes de aplicar el colapso
      function waitForTreeThenCollapse() {
        let tries = 0;
        const interval = setInterval(() => {
          tries++;
          const treeNav = aside.querySelector(".tree-nav");
          if (treeNav) {
            collapseAllAndOpenOnlyFirstRoot();
            setTimeout(collapseAllAndOpenOnlyFirstRoot, 400);
            clearInterval(interval);
          }
          if (tries > 50) clearInterval(interval);
        }, 100);
      }

      // === Bot√≥n mostrar/ocultar ===
      btn.addEventListener("click", e => {
        e.preventDefault();
        const hidden = aside.classList.contains("hidden");

        if (hidden) {
          aside.classList.remove("hidden");
          pageShell.classList.remove("full-width");
          btn.textContent = "Ocultar √≠ndice";
          btn.classList.add("active");
          localStorage.setItem("indexVisible", "true");
          waitForTreeThenCollapse();
        } else {
          aside.classList.add("collapsing");
          pageShell.classList.add("full-width");
          btn.textContent = "Mostrar √≠ndice";
          btn.classList.remove("active");
          localStorage.setItem("indexVisible", "false");
          setTimeout(() => {
            aside.classList.remove("collapsing");
            aside.classList.add("hidden");
          }, 300);
        }
      });

      // === Resetear estado del √≠ndice ===
      function resetIndexState() {
        localStorage.setItem("indexVisible", "false");
        setTimeout(() => {
          const treeNav = aside.querySelector(".tree-nav");
          if (!treeNav) return;
          collapseAllAndOpenOnlyFirstRoot();
        }, 800);
      }

      // Ejecutar al cargar
      resetIndexState();

      // Tambi√©n al hacer clic en Inicio o ‚ú± xut
      document.querySelectorAll('a.site-brand, .site-nav a[href="/"]').forEach(link => {
        link.addEventListener("click", () => {
          resetIndexState();
        });
      });

      // Actualizar a√±o del footer
      document.getElementById("year").textContent = new Date().getFullYear();
    });
  </script>
</body>
</html>

