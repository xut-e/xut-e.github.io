Es crucial explicar otro concepto clave: la encapsulación. En este contexto, la encapsulación se refiere al proceso de a cada capa añadirle una cabecera (y a veces un pie).

En la imagen de abajo tenemos los siguientes pasos:

- Información de aplicación: Cuando el usuario introduce la información que quiere mandar.
- Segmento del protocolo de transporte: La capa de transporte, como UDP o TCP, añade información de cabecera y crea el TCP segment o UDP datagram.
- Paquete de red: La capa de red añade cabecera IP al segmento o datagram recibido, entonces, este paquete IP es mandado a la capa siguiente.
- Marco de data link: El Ethernet o la WiFi recibe el paquete IP y le añade su correspondiente cabecera y pie, creando el marco.

Empezamos con la aplicación a enviar, en la capa de transporte añadimos TCP o UDP header. En la capa de red añadimos el IP header. Finalmente añadimos un header y un trailer para encapsular la información en un marco.

![[5f04259cf9bf5b57aed2c476-1719849061418.jpg]]

---------------------
<h2>La vida de un paquete</h2>
Basado en lo que hemos estudiado hasta el momento, podemos explicar de manera simplificada la vida de un paquete. Consideremos un escenario en el que buscamos una habitación en TryHackMe.

1. En la página de TryHackMe introducimos una query y le damos a buscar.
2. El buscador web, usando HTTPS, prepara una petición HTTP y la manda a la capa debajo, la capa de transporte.
3. La capa TCP necesita establecer una conexión vía three-way handshake entre tu buscador y el servidor de TryHackMe. Después de que sea establecida, manda la petición que contiene la query.
4. El la capa de red, la IP fuente es añadida y después mandado a la capa inferior, la capa de link.
5. Dependiendo del protocolo, se añade los correspondientes header y trailer y se manda al router.
6. El router elimina el header de la capa de link inspecciona la IP de destino y lo manda al próximo router. Cada router repite este proceso hasta que llega a su destino.

Los pasos son invertidos después para volver a tu bnuscador.