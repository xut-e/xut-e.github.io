A estas alturas deberíamos tener un buen entendimiento de los vectores de escalada de privilegios en Linux por lo que este reto debería ser fácil.

Has ganado acceso a una gran instalación científica por SSH. Intenta elevar tus privilegios hasta ser root.

No te dejes ningún método por comprobar, la escalada de privilegios suele ser más a menudo un arte que una ciencia.

-------------------------------
<h2>Challenge</h2>
1. Entramos por SSH con las credenciales otorgadas.
   ![[Pasted image 20251127193448.png]]
2. Empezaremos por el primer método estudiado: Kernel Exploits.
	1. Listamos el kernel.
	   ![[Pasted image 20251127193611.png]]
	2. Buscamos en Github (no hay nada) y buscamos en Exploit-DB, donde encontramos lo siguiente.
	   ![[Pasted image 20251127194047.png]]
	   No hay ninguna verificada, por lo que de momento no nos la vamos a jugar. 
3. Seguimos con el siguiente método: sudo.
	1. Probamos con `sudo -l`.
	   ![[Pasted image 20251127194334.png]]
	   No podemos, pasamos al siguiente método.
4. El siguiente método es SUID.
	1. Empezamos buscando los archivos con los bits SUID y/o SGID configurados.
	   ![[Pasted image 20251127194721.png]]
	   Vamos a compararlos en GTFOBins.
	2. Hemos encontrado que base64 con SUID nos permite leer archivos.
	   ![[Pasted image 20251127194831.png]]
	3. Vamos a leer `/etc/shadow`.
	   ![[Pasted image 20251127195115.png]]
	   Hemos encontrado los hashes de root y missy.
	4. Veamos que grupos/id tiene missy.
	   ![[Pasted image 20251127195236.png]]
	   Nada muy interesante.
	5. Intentaremos crackear los hashes con John the Ripper.
		1. Metemos los archivos shadow y passwd y los combinamos con `unshadow`.
		   ![[Pasted image 20251127195921.png]]
		2. Investigamos que hash son las contraseñas en nuestros propios apuntes.
		   ![[Pasted image 20251127195854.png]]
		3. Usamos John para crackearlos.
		   ![[Pasted image 20251127202448.png]]
		   De momento parece que hemos encontrado la contraseña de missy.
5. Vamos a probar con el siguiente método: Capabilities.
	1. Usamos `getcap -r / 2>/dev/null` para obtener las capabilities.
	   ![[Pasted image 20251127201310.png]]
	2. Comparamos en GTFOBins.
	   ![[Pasted image 20251127201439.png]]
	   Ninguno coincide.
6. Vamos a probar el siguiente método: Cron Jobs.
	1. Miramos el archivo `/etc/crontab`.
	   ![[Pasted image 20251127201553.png]]
	   No hay nada.
7. Seguimos con el siguiente método: PATH.
	1. Listamos el PATH.
	   ![[Pasted image 20251127201737.png]]
	   Parece interesante la ruta `/home/leonard/scripts`.
	2. No existe esa ruta. Podríamos intentar escalar creando el directorio y metiendo algún binario dentro más adelante.
	   ![[Pasted image 20251127201927.png]]
8. Vamos a seguir con el siguiente y último método: NFS.
	1. Listamos `/etc/exports`.
	   ![[Pasted image 20251127202245.png]]
	   Está vacío, así que nada.
9. De momento lo más prometedor que hemos encontrado es la contraseña de missy, así que seguiremos por ahí. Nos logueamos con missy.
   ![[Pasted image 20251127202532.png]]
   Vamos a repetir los pasos con missy, a ver qué encontramos.
10. Vaya, resulta que con missy sí podemos ejecutar ciertos comandos como sudo.
    ![[Pasted image 20251127202729.png]]
11. Vamos a ver qué podemos conseguir en GTFOBins.
    ![[Pasted image 20251127202831.png]]
    Parece que sí que es útil heheh.
12. Seguimos los pasos.
    ![[Pasted image 20251127202918.png]]
13. Buscamos la flag.
    ![[Pasted image 20251127203033.png]]
    Por el directorio donde está podemos intuir que la flag era leíble sin permisos de root desde la cuenta de missy. Por lo que seguramente también podamos leer ya la flag2.
14. Buscamos la flag 2.
    ![[Pasted image 20251127203215.png]]

>[!SUCCESS] Hemos conseguido escalar privilegios y obtener las dos flags.

