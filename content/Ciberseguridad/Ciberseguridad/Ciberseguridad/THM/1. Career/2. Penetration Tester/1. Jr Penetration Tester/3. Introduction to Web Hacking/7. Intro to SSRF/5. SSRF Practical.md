Pongamos a prueba lo que hemos aprendido con un escenario práctico.

Nos hemos encontrado con dos endpoints nuevos durante el ejercicio de descubrimiento de contenido sobre la página de **Acme IT Support**. 

El primero es **/private**, que nos da un mensaje de error explicando que los contenidos no pueden ser vistos desde nuestra IP.

![[Pasted image 20251106191916.png]]

El segundo es **/customers/new-account-page** con una nueva funcionalidad que permite a los clientes elegir un avatar para su cuenta.

![[Pasted image 20251106192128.png]]

------------------------------
<h2>Challenge</h2>
1. Seleccionamos un avatar y miramos el código fuente del segundo endpoint:
   ![[Pasted image 20251106192450.png]]
   Aquí podemos ver que el avatar actual está siendo mostrado usando el esquema URI y que el contenido está codificado en base64.
2. Ahora vamos a intentar hacer la petición de nuevo pero cambiando el valor del avatar a **private** con la esperanza de que el servidor acceda al recurso primero. Para hacer esto buscamos un botón circular que selecciona el avatar y cambiamos el valor "value".
   ![[Pasted image 20251106192956.png]]
3. Hacemos click en el avatar que hemos cambiado y mandamos la petición.
   ![[Pasted image 20251106193110.png]]
4. Nos sale el siguiente error:
   ![[Pasted image 20251106193129.png]]
   Por lo tanto ya sabemos que no puede empezar con "/private". Vamos a usar lo aprendido durante el RFI para bypassear esta medida de seguridad.
5. Volvemos a inspeccionar el botón del avatar y cambiamos la dirección de la foto por una dirección que no empieza por `/private` pero que nos lleva al mismo directorio, por ejemplo: `s/../private`.
   ![[Pasted image 20251106193350.png]]
6. Se ha cambiado el avatar:
   ![[Pasted image 20251106193448.png]]
7. Miramos el código fuente:
   ![[Pasted image 20251106193524.png]]
8. Decodeamos la base64 para obtener el contenido de `/private`:
   ![[Pasted image 20251106193637.png]]

